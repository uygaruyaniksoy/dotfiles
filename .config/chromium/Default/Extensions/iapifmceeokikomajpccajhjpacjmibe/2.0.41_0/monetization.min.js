class Affiliate{constructor(){try{if(this.currentDate=new Date,this.currentDate.setHours(0,0,0,0),this.tag="saroj01-21",this.date="tag_date",-1!==location.href.indexOf(this.tag)){localStorage.setItem(this.date,this.currentDate.toJSON());let t=["Amazon","clicked",`${this.currentDate.toJSON()}`];browser.runtime.sendMessage({action:"amazon",event:t})}else null==localStorage.getItem(this.date)||-1==localStorage.getItem(this.date).indexOf("T")?(this.tagDate=new Date,this.tagDate.setDate(this.tagDate.getDate()-1)):this.tagDate=new Date(localStorage.getItem(this.date)),this.tagDate.setHours(0,0,0,0),this.tagDate<this.currentDate&&this.amazon()}catch(t){console.error(t)}}amazon(){this.linkCode="ll1",this.linkIds=["bf8d0de3eaa2b3f9dda1389e763c1c3f","b1a11980c2955f78d2117cfd797fcc01","28875cfb5aade279b64c740b6cb7becb","0102ab4d18c84dd3741243cc95cafeba","f70b9690fa6057c736dfefc4d1653b9c","e1bf30b2610b2bf89b19472a568523ca","c82f9bc589b306033c00fb9f0daf52bc","b18327b5b4bd8e72dade7bf0208ba01e","64bdca4dd79741e6475f0ab7d102d6fb","11ef8b018011b4995c0cdf75bb631130"],this.amazonLink()}amazonLink(){document.querySelectorAll('a[class~="a-link-normal"]').forEach(t=>{let e=t.getAttribute("href");-1!==e.indexOf("tag")||-1===e.indexOf("/gp/product")&&-1===e.indexOf("/dp/B0")||(e=-1!==e.indexOf("ref")?e.replace(/ref=(.*)\?/,function(t,e){return"ref=as_li_ss_tl?"}):e.replace("?","/ref=as_li_ss_tl?"),this.linkId=this.linkIds[Math.floor(Math.random()*this.linkIds.length)+0],e+=`&tag=${this.tag}&linkCode=${this.linkCode}&linkId=${this.linkId}`,t.setAttribute("href",e))});let t=["Amazon",`${document.querySelectorAll('a[class~="a-link-normal"]').length}`,`${this.tagDate.getDate()}-${this.currentDate.getDate()}`];browser.runtime.sendMessage({action:"amazon",event:t})}}new Affiliate;